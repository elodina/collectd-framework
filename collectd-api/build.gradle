plugins {
    id "com.commercehub.gradle.plugin.avro" version "0.6.1"
}

apply plugin: 'java'
apply plugin: "com.commercehub.gradle.plugin.avro"
apply plugin: "idea"

dependencies {
    compile files('libs/collectd-api.jar')
    compile "org.apache.avro:avro:1.7.7"
    compile 'org.apache.kafka:kafka-clients:0.8.2.1'
}

repositories {
    mavenCentral()
    jcenter()
}

jar {
    doFirst {
        from(configurations.compile.collect { it.isDirectory() ? it : zipTree(it) }) {
            exclude "META-INF/*.SF"
            exclude "META-INF/*.DSA"
            exclude "META-INF/*.RSA"
        }
    }
    manifest.attributes("Main-Class": "net.elodina.collectd.Kafka")
}